---
title: 'Selects'
---

import { ScopeableLayout } from '../../components/layout'
import {
  Select,
  AsyncSelect,
  CreatableSelect,
  AsyncCreatableSelect,
} from 'react-magma-dom'
import DocsHeading from '../../components/docs-heading'
import { SimplePropsTable } from '../../components/props-table'

<DocsHeading to="/design/select/" type="design">
  Selects
</DocsHeading>

## Basic Usage

A `Select` component allows the user to choose one or more item from a list. By default, only one item may be selected.

The label/select association will be handled via the passed in `id` if one is supplied or via an auto-generated `id` if not supplied.

This component is built upon [React Select by Jed Watson](https://react-select.com/home).

```.jsx
  <>
    <Select
      id="basicSelectId"
      name="basic"
      labelText="Basic"
      options={[{
        value: 'red',
        label: 'Red'
      }, {
        value: 'blue',
        label: 'Blue'
      }, {
        value: 'green',
        label: 'Green'
      }]}
    />
  </>
```

## Multi-Select

The optional `multi` prop allows the user to select more than one item.

```.jsx
  <>
    <Select
      id="multiSelectId"
      name="multi"
      labelText="Multi"
      options={[{
        value: 'red',
        label: 'Red'
      }, {
        value: 'blue',
        label: 'Blue'
      }, {
        value: 'green',
        label: 'Green'
      }]}
      multi
    />
  </>
```

## Clearable

The optional `clearable` prop allows the user to clear the field once a selection has been made.

```.jsx
  <>
    <Select
      id="clearableSelectId"
      name="clearable"
      labelText="Clearable"
      options={[{
        value: 'red',
        label: 'Red'
      }, {
        value: 'blue',
        label: 'Blue'
      }, {
        value: 'green',
        label: 'Green'
      }]}
      clearable
    />
  </>
```

## Default Value

```.jsx
  <>
    <Select
      id="defaultValueSelectId"
      name="defaultValue"
      labelText="Default Value"
      options={[{
        value: 'red',
        label: 'Red'
      }, {
        value: 'blue',
        label: 'Blue'
      }, {
        value: 'green',
        label: 'Green'
      }]}
      defaultValue={{
        value: 'red',
        label: 'Red'
      }}
    />
  </>
```

## Disabled

```.jsx
  <>
    <Select
      id="disabledSelectId"
      name="disabled"
      labelText="Disabled"
      options={[{
        value: 'red',
        label: 'Red'
      }, {
        value: 'blue',
        label: 'Blue'
      }, {
        value: 'green',
        label: 'Green'
      }]}
      disabled
    />
  </>
```

## Error message

If a select has an `errorMessage`, the select will be styled to highlight it's error state and the error message will appear below the field.
If an error message is present, it will replace the helper text.

```.jsx
  <>
    <Select
      errorMessage="Please select a color"
      helperMessage="Helper text goes here"
      name="error"
      labelText="Error message"
      options={[{
        value: 'red',
        label: 'Red'
      }, {
        value: 'blue',
        label: 'Blue'
      }, {
        value: 'green',
        label: 'Green'
      }]}
    />
  </>
```

## Helper message

The `helperMessage` appears underneath the select field. It will not appear if an error message is present.

```.jsx
  <>
    <Select
      helperMessage="Helper text goes here"
      name="helper"
      labelText="Helper message"
      options={[{
        value: 'red',
        label: 'Red'
      }, {
        value: 'blue',
        label: 'Blue'
      }, {
        value: 'green',
        label: 'Green'
      }]}
    />
  </>
```

## Inverse styles

The `inverse` property is an optional boolean, that reverses the colors so that the select can better appear on a dark background.
The default value is `false`.

```.jsx
  <div style={{ background : '#00263E', color: '#ffffff', padding: '10px' }}>
    <Select
      errorMessage="Please select a color"
      inverse
      name="inverse"
      labelText="Error message"
      options={[{
        value: 'red',
        label: 'Red'
      }, {
        value: 'blue',
        label: 'Blue'
      }, {
        value: 'green',
        label: 'Green'
      }]}
    />
  </div>
```

## AsyncSelect

The `loadOptions` property allows for loading from a remote source as the user types.

```.jsx
class Select extends React.Component {
  constructor(props) {
    super(props);

    this.filterColors = this.filterColors.bind(this);
    this.promiseOptions = this.promiseOptions.bind(this);
  }

  filterColors(inputValue) {
    return [
      {
        label: "Red",
        value: "red"
      },
      {
        label: "Blue",
        value: "blue"
      }
    ].filter(i =>
      i.label.toLowerCase().includes(inputValue.toLowerCase())
    );
  }

  promiseOptions(inputValue) {
    return new Promise(resolve => {
      setTimeout(() => {
        resolve(this.filterColors(inputValue));
      }, 1000);
    });
  }

  render() {
    return (
      <>
        <AsyncSelect labelText="Async Select" loadOptions={this.promiseOptions} />
      </>
    );
  }
}
```

## CreatableSelect

The `CreatableSelect` allows for the creation of a new option if that option is not found.

```.jsx
class Select extends React.Component {
  constructor(props) {
    super(props);

    this.state = {
      options: [
        {
          label: "Red",
          value: "red"
        },
        {
          label: "Blue",
          value: "blue"
        }
      ]
    };

    this.handleChange = this.handleChange.bind(this);
    this.handleInputChange = this.handleInputChange.bind(this);
  }

  handleChange(value, action) {
    if (value.__isNew__) {
      this.state.options.push({
        label: value.label,
        value: value.value
      })
    }
  }

  handleInputChange(value, action) {
    console.group('Input Changed');
    console.log(value);
    console.groupEnd();
  };

  render() {
    return (
      <CreatableSelect
        labelText="Creatable Select"
        isClearable
        onChange={this.handleChange}
        onInputChange={this.handleInputChange}
        options={this.state.options}
      />
    );
  }
}
```

## AsyncCreatableSelect

The `AsyncCreatableSelect` combines both the creation of a new option and the loading from a remote source.

```.jsx
class Select extends React.Component {
  constructor(props) {
    super(props);

    this.state = {
      options: [
        {
          label: "Red",
          value: "red"
        },
        {
          label: "Blue",
          value: "blue"
        }
      ]
    };

    this.filterColors = this.filterColors.bind(this);
    this.promiseOptions = this.promiseOptions.bind(this);
    this.handleChange = this.handleChange.bind(this);
  }

  filterColors(inputValue) {
    return this.state.options.filter(i =>
      i.label.toLowerCase().includes(inputValue.toLowerCase())
    );
  }

  promiseOptions(inputValue) {
    return new Promise(resolve => {
      setTimeout(() => {
        resolve(this.filterColors(inputValue));
      }, 1000);
    });
  }

  handleChange(value, action) {
    if (value.__isNew__) {
      this.state.options.push({
        label: value.label,
        value: value.value
      })
    }
  }

  render() {
    return (
      <>
        <AsyncCreatableSelect labelText="Async Creatable Select" loadOptions={this.promiseOptions} onChange={this.handleChange} />
      </>
    );
  }
}
```

## Controlled

```.jsx
  class SelectInput extends React.Component {
    constructor(props) {
      super(props)
      this.state = {
        value: null
      };

      this.changeValue = this.changeValue.bind(this);
    }

    changeValue(value) {
      this.setState(state => ({
        value
      }));
    }

    render() {
      return <>
        <p>
          <strong>Value: </strong>
          <span id="value">{this.state.value ? this.state.value.value : 'No Value Set'}</span>
        </p>
        <Select
          id="valueSelectId"
          name="value"
          labelText="Value"
          options={[{
            value: 'red',
            label: 'Red'
          }, {
            value: 'blue',
            label: 'Blue'
          }, {
            value: 'green',
            label: 'Green'
          }]}
          onChange={this.changeValue}
        />
      </>
    }
  }
```

## Focus Events

```.jsx
  class SelectInput extends React.Component {
    constructor(props) {
      super(props)
      this.state = {
        focused: false,
        message: 'No'
      };

      this.changeFocusedMessage = this.changeFocusedMessage.bind(this);
    }

    changeFocusedMessage() {
      const focused = !this.state.focused;

      this.setState(state => ({
        focused,
        message: focused ? 'Yes' : 'No',
      }));
    }

    render() {
      return <>
        <p><strong>Focused: </strong> <span id="focused">{this.state.message}</span></p>
        <Select
          id="focusedSelectId"
          name="focused"
          labelText="Focused?"
          options={[{
            value: 'red',
            label: 'Red'
          }, {
            value: 'blue',
            label: 'Blue'
          }, {
            value: 'green',
            label: 'Green'
          }]}
          onFocus={this.changeFocusedMessage}
          onBlur={this.changeFocusedMessage}
        />
      </>
    }
  }
```

## Open and Close Events

```.jsx
  class SelectInput extends React.Component {
    constructor(props) {
      super(props)
      this.state = {
        opened: false,
        message: 'No'
      };

      this.changeOpenedMessage = this.changeOpenedMessage.bind(this);
    }

    changeOpenedMessage() {
      const opened = !this.state.opened;

      this.setState(state => ({
        opened,
        message: opened ? 'Yes' : 'No',
      }));
    }

    render() {
      return <>
      <p><strong>Opened: </strong> <span id="opened">{this.state.message}</span></p>
        <Select
          id="openedSelectId"
          name="opened"
          labelText="Opened?"
          options={[{
            value: 'red',
            label: 'Red'
          }, {
            value: 'blue',
            label: 'Blue'
          }, {
            value: 'green',
            label: 'Green'
          }]}
          onOpen={this.changeOpenedMessage}
          onClose={this.changeOpenedMessage}
        />
      </>
    }
  }
```

## Testing

Passing in the `testId` prop will add the `data-testid` attribute to the wrapper element for easier querying in tests.

```html
<div data-testid="test-id">
  <label class="css-1bgxxbw egrtx8x0">Basic</label>
  <div id="basicSelectId">
    <div>
      <div>
        <div>Select...</div>
        <div>
          <div style="display: inline-block;">
            <input
              autocapitalize="none"
              autocomplete="off"
              autocorrect="off"
              id="react-select-19-input"
              spellcheck="false"
              tabindex="0"
              type="text"
              aria-autocomplete="list"
              aria-label="Basic"
              value=""
            />
            <div style="text-transform: none;"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
```

## Select Props

<SimplePropsTable
  props={{
    cacheOptions: {
      type: {
        name: 'boolean',
      },
      required: false,
      description: '',
      defaultValue: 'false',
    },
    clearable: {
      type: {
        name: 'boolean',
      },
      required: false,
      description:
        'If true, the user may clear the field once a selection has been made',
      defaultValue: 'false',
    },
    defaultOptions: {
      type: {
        name: 'object[]:',
        options: ['{ label, text }'],
      },
      required: false,
      description: 'Default options that appear in the select menu',
      defaultValue: '',
    },
    defaultValue: {
      type: {
        name: 'string',
      },
      required: false,
      description: '',
      defaultValue: '',
    },
    disabled: {
      type: {
        name: 'boolean',
      },
      required: false,
      description: '',
      defaultValue: 'false',
    },
    errorMessage: {
      type: {
        name: 'string',
      },
      required: false,
      description:
        'Text of the error message.  If a value is provided, the error message will be styled as an error state.',
      defaultValue: '',
    },
    helperMessage: {
      type: {
        name: 'string',
      },
      required: false,
      description: 'Text of the helper message.',
      defaultValue: '',
    },
    labelText: {
      type: {
        name: 'string',
      },
      required: true,
      description: 'Text for label',
    },
    loadOptions: {
      type: {
        name: 'function(value: string)',
      },
      required: true,
      description: '',
    },
    multi: {
      type: {
        name: 'boolean',
      },
      required: false,
      description: '',
      defaultValue: 'false',
    },
    name: {
      type: {
        name: 'string',
      },
      required: true,
      description: '',
      defaultValue: '',
    },
    onBlur: {
      type: {
        name: 'function',
      },
      required: false,
      description: 'Action that fires when the component loses focus',
    },
    onChange: {
      type: {
        name: 'function',
      },
      required: false,
      description:
        'Action that fires when selected value of the component changes',
    },
    onClose: {
      type: {
        name: 'function',
      },
      required: false,
      description: 'Action that fires when the select menu closes',
    },
    onFocus: {
      type: {
        name: 'function',
      },
      required: false,
      description: 'Action that fires when the component receives focus',
    },
    onOpen: {
      type: {
        name: 'function',
      },
      required: false,
      description: 'Action that fires when the select menu opens',
    },
    required: {
      type: {
        name: 'boolean',
      },
      required: false,
      description: 'If true, the form field is required',
      defaultValue: 'false',
    },
    style: {
      type: {
        name: 'ReactSelect.Styles',
      },
      required: false,
      description:
        'Custom styles for the component using the style interface below',
      defaultValue: '',
    },
    testId: {
      type: {
        name: 'string',
      },
      required: false,
      description: 'ID used for testing purposes',
      defaultValue: '',
    },
  }}
/>

### Style Interface

```
interface ReactSelectStyles {
control?: React.CSSProperties;
dropdownIndicator?: React.CSSProperties;
clearIndicator?: React.CSSProperties;
indicatorSeparator?: React.CSSProperties;
menu?: React.CSSProperties;
multiValue?: React.CSSProperties;
multiValueRemove?: React.CSSProperties;
option?: React.CSSProperties;
}

```

export default props => (
  <ScopeableLayout
    {...props}
    components={{
      Select,
      AsyncSelect,
      CreatableSelect,
      AsyncCreatableSelect,
    }}
  />
)
